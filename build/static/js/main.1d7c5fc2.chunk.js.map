{"version":3,"sources":["store/types.js","store/reducers/charactersReducer.js","store/index.js","components/button/Button.js","components/column/Column.js","store/actions/charactersAction.js","components/character/Character.js","components/app/App.js","index.js"],"names":["SET_CHARACTERS","ADD_CHARACTER","REMOVE_CHARACTER","CHANGE_CHARACTER_NAME","initialState","characters","rootReducer","combineReducers","charactersStore","state","action","type","payload","decreaseCharacters","race","character","increaseCharacters","filter","el","id","charactersWithNewName","characterIndex","findIndex","name","store","createStore","Button","children","onClick","style","className","Column","title","dispatch","useDispatch","prompt","newCharacter","Date","now","replaceAll","marginLeft","Character","fontStyle","color","fontSize","width","marginRight","marginBottom","padding","changeCharacterName","removeCharacter","socket","WebSocket","App","useSelector","useEffect","onopen","send","cmd","onmessage","data","charactersObj","JSON","parse","forEach","key","Object","keys","includes","setCharacters","map","i","length","marginTop","textAlign","crct","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1d7c5fc2.chunk.js","sourcesContent":["export const SET_CHARACTERS = 'CHARACTERS/SET_CHARACTERS'\r\nexport const ADD_CHARACTER = 'CHARACTERS/ADD_CHARACTER'\r\nexport const REMOVE_CHARACTER = 'CHARACTERS/REMOVE_CHARACTER'\r\nexport const CHANGE_CHARACTER_NAME = 'CHARACTERS/CHANGE_NAME'\r\n\r\n","import {ADD_CHARACTER, SET_CHARACTERS, REMOVE_CHARACTER, CHANGE_CHARACTER_NAME} from './../types'\r\n\r\nconst initialState = {\r\n  characters: null\r\n}\r\n\r\nexport const charactersReducer = (state = initialState, action) =>  {\r\n  switch (action.type) {\r\n    case SET_CHARACTERS: \r\n      return {...state, characters: action.payload}\r\n    case ADD_CHARACTER:\r\n      const decreaseCharacters = {...state.characters}\r\n      decreaseCharacters[action.payload.race] = [...decreaseCharacters[action.payload.race], action.payload.character]\r\n      return {...state, characters: decreaseCharacters}\r\n    case REMOVE_CHARACTER:\r\n      const increaseCharacters = {...state.characters}\r\n      increaseCharacters[action.payload.race] = increaseCharacters[action.payload.race].filter(el => el.id !== action.payload.id)\r\n      return {...state, characters: increaseCharacters}\r\n    case CHANGE_CHARACTER_NAME:\r\n      const charactersWithNewName = {...state.characters}\r\n      const characterIndex = charactersWithNewName[action.payload.race].findIndex(el => el.id === action.payload.id)\r\n      charactersWithNewName[action.payload.race][characterIndex].name = action.payload.name       \r\n      return {...state, characters: charactersWithNewName}\r\n    default:\r\n      return state\r\n  }\r\n}","import {createStore, combineReducers} from 'redux'\r\nimport {charactersReducer} from './reducers/charactersReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  charactersStore: charactersReducer\r\n})\r\n\r\nexport const store = createStore(rootReducer)","import './Button.css'\r\n\r\nexport default function Button({children, onClick, style}) {\r\n  return <button className='btn' onClick={onClick} style={style}>\r\n    {children}\r\n  </button>\r\n}","import {useDispatch} from 'react-redux'\r\nimport {addCharacter} from '../../store/actions/charactersAction'\r\nimport Button from './../button/Button'\r\nimport './Column.css'\r\n\r\nexport default function Column({children, title}) {\r\n  const dispatch = useDispatch()\r\n  \r\n  function buttonHandler() {\r\n    const name = prompt('Введите имя нового персонажа')\r\n\r\n    const newCharacter = {\r\n      character: {id:Date.now(), name}, \r\n      race: title\r\n    }\r\n\r\n    if(name !== null){\r\n      if(name.replaceAll(' ', '')){\r\n        dispatch(addCharacter(newCharacter))\r\n      }\r\n    }\r\n  }\r\n\r\n  return <div className='column'>\r\n    <div className='column-title' >\r\n      Раса - {title}\r\n      <Button onClick={buttonHandler} style={{marginLeft: '25px'}}>Добавить</Button>\r\n    </div>\r\n\r\n    {children}\r\n  </div>\r\n}","import {SET_CHARACTERS, ADD_CHARACTER, REMOVE_CHARACTER, CHANGE_CHARACTER_NAME} from '../types'\r\n\r\nexport function setCharacters(characters) {\r\n  return {\r\n    type: SET_CHARACTERS,\r\n    payload: characters\r\n  }\r\n}\r\n\r\nexport function addCharacter(character) {\r\n  return {\r\n    type: ADD_CHARACTER,\r\n    payload: character\r\n  }\r\n}\r\n\r\nexport function removeCharacter(race, id) {\r\n  return {\r\n    type: REMOVE_CHARACTER,\r\n    payload: {race, id}\r\n  }\r\n}\r\n\r\nexport function changeCharacterName(race, id, name){\r\n  return {\r\n    type: CHANGE_CHARACTER_NAME,\r\n    payload: {race, id, name} \r\n  }\r\n}\r\n","import {useDispatch} from 'react-redux'\r\nimport {removeCharacter, changeCharacterName} from '../../store/actions/charactersAction'\r\nimport Button from './../button/Button'\r\nimport './Character.css'\r\n\r\nexport default function Character({name, id, race}) {\r\n  const dispatch = useDispatch()\r\n\r\n  function changeName(){\r\n    const name = prompt('Введите новое имя персонажа')\r\n\r\n    if(name !== null){\r\n      if(name.replaceAll(' ', '')){\r\n        dispatch(changeCharacterName(race, id, name))\r\n      }\r\n    }\r\n  }\r\n\r\n  return <div className='character'>\r\n    <div className='character-name'>\r\n      Имя персонажа - <span style={{fontStyle: 'italic', color:'salmon', fontSize: '16px'}}>{name}</span>\r\n    </div>\r\n    <div style={{width: '100%'}}>\r\n      <Button style={{marginRight:'10px', marginBottom: '5px', padding: '8px'}} onClick={changeName}>\r\n        Изменить имя\r\n      </Button>\r\n      <Button style={{padding: '8px'}} onClick={() => dispatch(removeCharacter(race, id))}>\r\n        Удалить\r\n      </Button>\r\n    </div>\r\n  </div>\r\n}","import {useDispatch, useSelector} from 'react-redux'\nimport {useEffect} from 'react'\nimport {setCharacters} from '../../store/actions/charactersAction'\nimport Column from './../column/Column'\nimport Character from './../character/Character'\nimport './App.css'\n\nconst socket = new WebSocket('ws://testapi.marit.expert:3004')\n\nfunction App() {\n  const dispatch = useDispatch()\n  const characters = useSelector(state => state.charactersStore.characters)\n\n  useEffect(() => {\n    socket.onopen = () => socket.send({cmd:'get_list'})\n\n    socket.onmessage = ({data}) => {\n      const charactersObj = {}\n\n      JSON.parse(data).forEach(el => {\n        const key = el.race\n\n        if( Object.keys(charactersObj).includes(key) ){\n          charactersObj[key] = [...charactersObj[key], {id:el.id, name: el.name}]\n        }else{\n          charactersObj[key] = [{id:el.id, name: el.name}]\n        }\n      })\n\n      dispatch(setCharacters(charactersObj))\n    }\n  }, [])\n\n  return <div className='app'>\n    { \n      characters ? \n      Object.keys(characters).map((race, i) => {\n        return <Column title={race} key={race + i}>\n          {\n            characters[race].length === 0 ? \n            <div style={{marginTop: '25px', textAlign:'center'}}>Вы удалили всех персонажей 😄</div> :\n            characters[race].map(crct => <Character name={crct.name} key={crct + crct.id} id={crct.id} race={race}/>)\n          }\n        </Column>\n      }) : null\n    }\n  </div>\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport {store} from './store'\nimport App from './components/app/App'\n\nReactDOM.render(\n <Provider store={store}>\n   <App />\n </Provider>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}